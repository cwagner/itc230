<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="styles.css">
  <title>React App Starter Page</title>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.6.2/react.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/15.6.1/react-dom.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.25.0/babel.min.js"></script>

</head>
<body>

	<div class="wrapper">
 		<div id="root"></div>
	</div>

  <script type="text/babel">

  	const Title = ({title}) => {
  		return <div><h2>{title}</h2></div>;
  	}

  	const ItemList = ({items, filter, show}) => {
  		const itemNodes = items.map((item) => {
  			return <li id={item._id} onClick={show}>Gear #{item.id}</li>
	  	});
	  	return <div id="item-list"><ul>{itemNodes}</ul></div>;
 	}
    const ItemDetails = (props) => {
      return (
        <div id="item-details">
          <h3>Details:</h3>
          <form onChange={props.change}>
            <input type="text" name="id" placeholder="id" value={props.item.id || ""} />
            <input type="text" name="category" placeholder="category" value={props.item.category || ""} />
            <input type="text" name="make" placeholder="make" value={props.item.make || ""} />
            <input type="text" name="model" placeholder="model" value={props.item.model || ""} />
            <input type="text" name="serial number" placeholder="serial number" value={props.item.serialnumber || ""} />
          </form>
          <button onClick={props.save}>Save</button> 
          <button onClick={props.reset}>Reset</button>
          <button onClick={props.delete}>Delete</button>
        </div>
      );
  }

 	class MyApp extends React.Component {
 		constructor(props){
 			super(props);

 			this.state = {
 				items: {{{gear}}},
        filter: "",
        curItem: {}
 			};
 		}

    showDetails(event) {
      let editItem = this.state.items.find((item) => {
      return item._id == event.target.id;
      });
      this.setState({curItem: editItem});
    }

 		render() {
 			return (
 				<div>
 				<Title title="Gear Inventory" />
 				<ItemList 
          items={this.state.items}
          show={this.showDetails.bind(this)}
        />
        <ItemDetails item={this.state.curItem} change={this.onChange} save={this.onSave} reset={this.onClear} delete={this.onDelete} />
 				</div>
 			);
 		}
 	}

 	ReactDOM.render(<MyApp />, document.getElementById('root'));


  </script>

</body>
</html>